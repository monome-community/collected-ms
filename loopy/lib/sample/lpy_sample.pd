#N canvas 153 578 431 341 10;
#N canvas 1341 67 850 828 lpy_sample_load 0;
#X obj -205 -24 openpanel;
#X obj -205 486 soundfiler;
#X msg -185 291 label \$1;
#X obj -195 90 symbol;
#X obj -185 117 splitfilename;
#X text -102 -102 on click to load sample;
#X text -141 -26 prompt for file name;
#X text -96 117 strip path for filename display;
#X text -69 345 save full file path for saved settings;
#X text 14 412 read stereo file into L/R arrays;
#X obj -205 -102 r \$1-\$2-load-smp;
#X obj -178 -50 s \$1-\$2-sample-stop;
#X text -58 -50 stop sample \, if playing;
#X obj -205 -75 t b b;
#X obj -195 345 s \$1-\$2-filenamesave;
#X obj -205 392 pack s \$1 \$2;
#X obj -195 540 s \$1-\$2-sample-length;
#X obj -185 318 s \$1-\$2-filename-display-r;
#X msg -205 648 label \$1sec;
#X obj -205 675 s \$1-\$2-smp-length-display-r;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$1-\$2-L-B 352800 float 2;
#X coords 0 1 352800 -1 100 70 1;
#X restore 152 13 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$1-\$2-R-B 352800 float 2;
#X coords 0 1 352800 -1 100 70 1;
#X restore 272 13 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$1-\$2-L-A 352800 float 2;
#X coords 0 1 352800 -1 100 70 1;
#X restore 152 -77 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$1-\$2-R-A 352800 float 2;
#X coords 0 1 352800 -1 100 70 1;
#X restore 272 -77 graph;
#X msg -205 459 read -resize \$1 \$2-\$3-L-A \$2-\$3-R-A;
#X msg -125 486 read -resize \$1 \$2-\$3-L-B \$2-\$3-R-B;
#X obj -205 594 int;
#X obj -205 567 / 441;
#X obj -205 621 / 100;
#X obj -205 36 r \$1-\$2-filename;
#X obj -205 3 s \$1-\$2-filename;
#X obj -175 513 r \$1-\$2-sample-length-catch;
#X obj -185 63 r \$1-\$2-filename-catch;
#X text -44 64 catch file name from sequence;
#X text -2 468 catch length from sequence;
#X obj -205 422 t l l l;
#X obj -110 258 text_scroll;
#X obj -110 144 t b a;
#X obj -110 231 list;
#X obj -70 198 bng 15 250 50 0 empty scroll-bang empty 17 7 0 10 -262144
-1 -1;
#X obj -70 171 r \$1-\$2-smp-scroll;
#X text -36 259 scroll long filename once;
#X text 43 170 scroll again if click from ui;
#X connect 0 0 30 0;
#X connect 1 0 27 0;
#X connect 1 0 16 0;
#X connect 2 0 17 0;
#X connect 3 0 4 0;
#X connect 3 0 14 0;
#X connect 4 1 37 0;
#X connect 10 0 13 0;
#X connect 13 0 0 0;
#X connect 15 0 35 0;
#X connect 18 0 19 0;
#X connect 24 0 1 0;
#X connect 25 0 1 0;
#X connect 26 0 28 0;
#X connect 27 0 26 0;
#X connect 28 0 18 0;
#X connect 29 0 15 0;
#X connect 29 0 3 0;
#X connect 31 0 16 0;
#X connect 31 0 27 0;
#X connect 32 0 3 0;
#X connect 35 0 24 0;
#X connect 35 1 25 0;
#X connect 36 0 2 0;
#X connect 37 0 38 0;
#X connect 37 1 38 1;
#X connect 38 0 36 0;
#X connect 39 0 38 0;
#X connect 40 0 39 0;
#X coords 0 0 1 1 85 60 0;
#X restore -52 -8 pd lpy_sample_load;
#N canvas 320 479 321 412 lpy_sample_clear 0;
#X msg -197 147;
#X msg -182 93 label ---;
#X obj -167 66 s \$1-\$2-smp-length-display-r;
#X obj -182 120 s \$1-\$2-filename-display-r;
#X obj -197 174 s \$1-\$2-filenamesave;
#X msg -167 39 label ---sec;
#X obj -137 -42 s \$1-\$2-smp-stop;
#X obj -212 -96 r \$1-\$2-smp-clear;
#X obj -152 12 s \$1-\$2-sample-length;
#X msg -152 -15 0;
#X obj -212 -69 t b b b b b b;
#X obj -212 201 s \$1-\$2-sample-save-off;
#X connect 0 0 4 0;
#X connect 1 0 3 0;
#X connect 5 0 2 0;
#X connect 7 0 10 0;
#X connect 9 0 8 0;
#X connect 10 0 11 0;
#X connect 10 1 0 0;
#X connect 10 2 1 0;
#X connect 10 3 5 0;
#X connect 10 4 9 0;
#X connect 10 5 6 0;
#X restore -52 52 pd lpy_sample_clear;
#X text 67 52 clear individual sample slot;
#N canvas 246 553 954 258 lpy_sample_data 0;
#X text 559 9 if no button off by sample end \, play;
#X text 615 20 at sample end \, play;
#X obj -11 11 f;
#X obj 4 -16 r \$1-\$2-sample-length;
#X obj -11 38 s \$2-sample-length;
#X obj -11 -43 r \$1-\$2-smp-data;
#X obj 149 144 f;
#X obj 149 -43 r \$1-\$2-smp-data;
#X obj 149 171 s \$2-sample-quantize;
#X obj 174 63 f \$1;
#X obj 174 90 pack f f;
#X obj 174 36 t b f;
#X obj 174 117 s \$2-smp-quantize-change;
#X obj 164 11 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 164 -16 r \$1-\$2-smp-quantize-on;
#X obj 367 -16 r \$1-\$2-smp-mode;
#X floatatom 367 17 5 0 0 0 - - -;
#X text 675 -2 at sample end \, play;
#X text 401 -2 0=momentary: button on=play \, button off=stop \;;
#X text 401 9 1=trigger: button on=play \;;
#X text 401 20 3=loop: button on=toggle play/stop \;;
#X obj 377 70 f \$1;
#X obj 377 97 pack f f;
#X obj 377 43 t b f;
#X obj 352 -43 r \$1-\$2-smp-data;
#X obj 352 151 f;
#X obj 377 124 s \$2-smp-mode-change;
#X obj 352 178 s \$2-smp-mode;
#X obj 818 -43 r \$1-\$2-smp-clear;
#X obj 818 9 f \$1;
#X obj 818 36 s \$2-sample-clear;
#X obj 818 -16 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X connect 2 0 4 0;
#X connect 3 0 2 1;
#X connect 5 0 2 0;
#X connect 6 0 8 0;
#X connect 7 0 6 0;
#X connect 9 0 10 0;
#X connect 10 0 12 0;
#X connect 11 0 9 0;
#X connect 11 1 10 1;
#X connect 13 0 11 0;
#X connect 13 0 6 1;
#X connect 14 0 13 0;
#X connect 15 0 16 0;
#X connect 16 0 23 0;
#X connect 16 0 25 1;
#X connect 21 0 22 0;
#X connect 22 0 26 0;
#X connect 23 0 21 0;
#X connect 23 1 22 1;
#X connect 24 0 25 0;
#X connect 25 0 27 0;
#X connect 28 0 31 0;
#X connect 29 0 30 0;
#X connect 31 0 29 0;
#X restore -52 92 pd lpy_sample_data;
#X text 67 87 if selected \, send this sample's data to row;
#X text 67 97 for use in when row in single or cue mode;
#N canvas 1884 132 544 762 lpy_sample_press 1;
#X obj -246 -36 r \$1-\$2-smp-press;
#X obj -236 -9 r \$1-\$2-slice-press;
#X obj -213 45 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj -246 70 spigot;
#X obj 37 230 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X text 56 229 quantize if sample + global quantize on;
#X obj -213 277 == 0;
#X obj -246 304 spigot;
#X obj -246 695 s \$1-\$2-smp-button-off;
#X obj -219 668 s \$1-\$2-smp-button-on;
#X obj -246 508 sel 0;
#X msg 49 405 -1;
#X obj -17 415 moses 0;
#X obj -17 388 f -1;
#X obj 4 331 spigot;
#X obj -246 151 s \$1-\$2-smp-button;
#X obj -246 203 r \$1-\$2-smp-button;
#X obj -236 230 moses 1;
#X text -198 39 if 'multi' mode \, allow;
#X text -198 49 sample + slice press messages;
#X obj 37 203 r \$1-\$2-smp-quantize-toggle;
#X obj 47 256 s \$1-\$2-smp-quantize-on;
#X msg -101 405 -1;
#X obj -167 415 moses 0;
#X obj -167 388 f -1;
#X obj -146 331 spigot;
#X text -190 225 quantize on/off separately;
#X obj -92 -36 r \$2-row-mode;
#X text -190 235 to prevent loss of message;
#X obj -92 -9 == 2;
#X obj -17 361 r \$2-row-quantize-bang;
#X obj -167 361 r \$2-row-quantize-bang;
#X obj -167 442 pipe 1;
#X obj -213 97 r \$1-\$2-sample-length;
#X obj -246 124 spigot;
#X text -201 124 if sample loaded (length>0) allow press messages;
#X obj -199 614 s fresh-start-r;
#X msg -199 587 0;
#X obj -209 641 s bpm-reset;
#X obj -176 535 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X obj -176 508 r fresh-start;
#X obj -209 560 spigot;
#X text -96 621 if step-press is first since;
#X text -96 631 start-up or stop all \, sync;
#X text -96 641 master clock with this press;
#X connect 0 0 3 0;
#X connect 1 0 3 0;
#X connect 2 0 3 1;
#X connect 3 0 34 0;
#X connect 4 0 6 0;
#X connect 4 0 14 1;
#X connect 4 0 21 0;
#X connect 4 0 25 1;
#X connect 6 0 7 1;
#X connect 7 0 10 0;
#X connect 10 0 8 0;
#X connect 10 1 9 0;
#X connect 10 1 41 0;
#X connect 11 0 13 1;
#X connect 12 1 11 0;
#X connect 12 1 10 0;
#X connect 13 0 12 0;
#X connect 14 0 13 1;
#X connect 16 0 17 0;
#X connect 16 0 7 0;
#X connect 17 0 25 0;
#X connect 17 1 14 0;
#X connect 20 0 4 0;
#X connect 22 0 24 1;
#X connect 23 1 22 0;
#X connect 23 1 32 0;
#X connect 24 0 23 0;
#X connect 25 0 24 1;
#X connect 27 0 29 0;
#X connect 29 0 2 0;
#X connect 30 0 13 0;
#X connect 31 0 24 0;
#X connect 32 0 10 0;
#X connect 33 0 34 1;
#X connect 34 0 15 0;
#X connect 37 0 36 0;
#X connect 39 0 41 1;
#X connect 40 0 39 0;
#X connect 41 0 37 0;
#X connect 41 0 38 0;
#X restore -52 132 pd lpy_sample_press;
#X text 69 126 if row in multi mode \, process button press;
#X text 69 136 messages for this sample;
#X text 69 156 use messages button press to play this sample;
#X text 69 166 in momentary \, trigger or loop mode;
#X text 69 201 ui and monome led control when row in multi mode;
#N canvas 187 27 1060 813 lpy_sample_play 0;
#X obj -176 -262 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X obj 170 -261 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X obj 462 -261 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X obj -30 -183 spigot;
#X obj -176 -210 spigot;
#X obj 551 -125 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X obj 551 -100 select 1;
#X obj 551 -182 spigot;
#X obj 429 -209 spigot;
#X obj 137 -70 spigot;
#X obj 127 -101 spigot;
#X msg 160 -182 1;
#X msg 200 -155 0;
#X obj -176 -183 s \$1-\$2-smp-stop;
#X obj 596 -46 s \$1-\$2-smp-stop;
#X obj 224 131 float \$1;
#X obj 243 104 float \$2;
#X obj 224 158 pack f f f;
#X obj 224 77 t b b f;
#X obj -31 -156 s \$1-\$2-smp-play;
#X obj 137 -45 s \$1-\$2-smp-play;
#X obj 429 -182 s \$1-\$2-smp-play;
#X obj 551 -73 s \$1-\$2-smp-play;
#X text -159 -269 momentary: button on=play \, button off=stop;
#X text -159 -259 at sample end \, play;
#X text 188 -259 if no button off by sample end \, play;
#X text 480 -259 at sample end \, play;
#X obj 420 104 expr if ($f1==1 && $f2==1 && $f3==0 \, 0 \, 1);
#X msg 457 185 0;
#X msg 430 185 1;
#X obj 457 158 r \$1-\$2-smp-stop;
#X obj 430 131 r \$1-\$2-smp-play;
#X text 682 98 at sample end in trigger mode:;
#X text 486 185 play=led on \, stop=led off;
#X obj -176 -237 r \$1-\$2-smp-button-off;
#X obj -30 -238 r \$1-\$2-smp-button-on;
#X obj 160 -209 r \$1-\$2-smp-button-on;
#X obj 200 -182 r \$1-\$2-smp-button-off;
#X obj 551 -235 r \$1-\$2-smp-button-on;
#X obj 224 -4 r \$1-\$2-smp-button-on;
#X obj 264 23 r \$1-\$2-smp-button-off;
#X msg 224 50 1;
#X msg 264 50 0;
#X text 682 108 if button on led on \,;
#X text 682 118 if button off led off;
#X obj -20 -210 r \$1-\$2-smp-done;
#X obj 127 -236 r \$1-\$2-smp-done;
#X obj 429 -236 r \$1-\$2-smp-done;
#X obj 420 -4 r \$1-\$2-smp-done;
#X obj 224 185 s smp-press-record;
#X msg 669 23 1;
#X msg 709 50 0;
#X obj 669 -4 r \$1-\$2-smp-button-on;
#X obj 709 23 r \$1-\$2-smp-button-off;
#X msg 420 77 1;
#X obj 551 -208 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 633 -188 r all-off;
#X msg 623 -153 0;
#X msg -166 241 bang;
#X msg -16 241 stop;
#X obj -16 -4 r \$1-\$2-smp-stop;
#X obj -166 -4 r \$1-\$2-smp-play;
#X obj 89 305 s \$1-\$2-smp-done;
#X obj 4 36 r all-off;
#X obj -166 405 throw~ \$2-group-L;
#X obj -16 405 throw~ \$2-group-R;
#X obj -166 278 tabplay~ \$1-\$2-L-A;
#X obj -16 278 tabplay~ \$1-\$2-R-A;
#X obj 420 212 s \$1-\$2-smp-led;
#X obj 200 -128 pipe 1;
#X obj 709 77 pipe 1;
#X text 87 -4 stop at sample level;
#X text 77 16 stop at row level;
#X text 64 36 global stop;
#X text 707 -208 stop at row level;
#X text 694 -188 global stop;
#X obj -176 -373 r \$1-\$2-smp-mode;
#X obj -176 -346 expr if ($f1==0 \, 1 \, 0) \; if ($f1==1 \, 1 \, 0)
\; if ($f1==2 \, 1 \, 0);
#X text 188 -269 trigger: button on = play;
#X text 480 -269 loop: button on = toggle play/stop;
#X obj -6 16 r \$2-row-stop;
#X obj 623 -208 r \$2-row-stop;
#X obj -149 325 r \$1-\$2-line;
#X obj -149 352 line~;
#X obj -165 378 *~;
#X obj -16 378 *~;
#X obj -147 50 float \$1;
#X obj -90 23 r microfade;
#X obj -127 70 float \$2;
#X obj -147 97 pack f f f;
#X obj -166 23 t b b b;
#X msg -147 124 \; \$1-\$2-line 1 \$3;
#X obj 3 100 float \$1;
#X obj 60 73 r microfade;
#X obj 23 120 float \$2;
#X obj 3 147 pack f f f;
#X obj -16 73 t b b b;
#X msg 3 174 \; \$1-\$2-line 0 \$3;
#X obj -16 214 delay;
#X connect 0 0 3 1;
#X connect 0 0 4 1;
#X connect 1 0 9 1;
#X connect 1 0 27 1;
#X connect 2 0 8 1;
#X connect 2 0 7 1;
#X connect 3 0 19 0;
#X connect 4 0 13 0;
#X connect 5 0 6 0;
#X connect 6 0 22 0;
#X connect 6 1 14 0;
#X connect 7 0 5 0;
#X connect 8 0 21 0;
#X connect 9 0 20 0;
#X connect 10 0 9 0;
#X connect 11 0 10 1;
#X connect 12 0 69 0;
#X connect 15 0 17 0;
#X connect 16 0 17 1;
#X connect 17 0 49 0;
#X connect 18 0 15 0;
#X connect 18 1 16 0;
#X connect 18 2 17 2;
#X connect 27 0 68 0;
#X connect 28 0 68 0;
#X connect 29 0 68 0;
#X connect 30 0 28 0;
#X connect 31 0 29 0;
#X connect 34 0 4 0;
#X connect 35 0 3 0;
#X connect 36 0 11 0;
#X connect 36 0 9 0;
#X connect 37 0 12 0;
#X connect 38 0 55 0;
#X connect 39 0 41 0;
#X connect 40 0 42 0;
#X connect 41 0 18 0;
#X connect 42 0 18 0;
#X connect 45 0 3 0;
#X connect 46 0 10 0;
#X connect 47 0 8 0;
#X connect 48 0 54 0;
#X connect 50 0 27 2;
#X connect 51 0 70 0;
#X connect 52 0 50 0;
#X connect 53 0 51 0;
#X connect 54 0 27 0;
#X connect 55 0 7 0;
#X connect 56 0 57 0;
#X connect 57 0 5 0;
#X connect 58 0 66 0;
#X connect 58 0 67 0;
#X connect 59 0 66 0;
#X connect 59 0 67 0;
#X connect 60 0 96 0;
#X connect 61 0 90 0;
#X connect 63 0 96 0;
#X connect 66 0 84 0;
#X connect 67 0 85 0;
#X connect 67 1 62 0;
#X connect 69 0 10 1;
#X connect 70 0 27 2;
#X connect 76 0 77 0;
#X connect 77 0 0 0;
#X connect 77 1 1 0;
#X connect 77 2 2 0;
#X connect 80 0 96 0;
#X connect 81 0 57 0;
#X connect 82 0 83 0;
#X connect 83 0 84 1;
#X connect 83 0 85 1;
#X connect 84 0 64 0;
#X connect 85 0 65 0;
#X connect 86 0 89 0;
#X connect 87 0 89 2;
#X connect 88 0 89 1;
#X connect 89 0 91 0;
#X connect 90 0 58 0;
#X connect 90 1 86 0;
#X connect 90 2 88 0;
#X connect 92 0 95 0;
#X connect 93 0 95 2;
#X connect 93 0 98 1;
#X connect 94 0 95 1;
#X connect 95 0 97 0;
#X connect 96 0 98 0;
#X connect 96 1 92 0;
#X connect 96 2 94 0;
#X connect 98 0 59 0;
#X restore -52 162 pd lpy_sample_play;
#N canvas 193 180 401 411 lpy_sample_led 0;
#X obj -174 29 s \$1-\$2-filename-display-r;
#X obj -174 -52 sel 0;
#X obj -204 -79 r \$1-\$2-smp-led;
#X obj -204 192 t b b f;
#X obj -204 246 f \$1;
#X obj -176 219 f \$2;
#X obj -204 273 pack f f f;
#X obj -171 120 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X obj -204 145 spigot;
#X text -156 114 if 'multi' mode \, send led;
#X text -11 30 highlight selected sample on ui;
#X obj -171 66 r \$2-row-mode;
#X obj -171 93 == 2;
#X text -156 124 lpy_transpose_led_single;
#X obj -204 300 s leds;
#X msg -174 -25 color 0 0 12;
#X msg -164 2 color 28 28 0;
#X connect 1 0 15 0;
#X connect 1 1 16 0;
#X connect 2 0 1 0;
#X connect 2 0 8 0;
#X connect 3 0 4 0;
#X connect 3 1 5 0;
#X connect 3 2 6 2;
#X connect 4 0 6 0;
#X connect 5 0 6 1;
#X connect 6 0 14 0;
#X connect 7 0 8 1;
#X connect 8 0 3 0;
#X connect 11 0 12 0;
#X connect 12 0 7 0;
#X connect 15 0 0 0;
#X connect 16 0 0 0;
#X restore -52 202 pd lpy_sample_led;
#X text 66 -8 load individual sample slot from file on disk;
#X text 73 22 assign recorder loop to individual sample slot;
#N canvas 298 140 345 223 lpy_sample_catch 0;
#X text -42 -102 on click to load sample;
#X obj -205 -75 t b b;
#X obj -205 -48 f \$1;
#X obj -178 -28 f \$2;
#X obj -205 -102 r \$1-\$2-smp-catch-display;
#X obj -205 -1 pack f f;
#X obj -205 26 s sample-catch;
#X connect 1 0 2 0;
#X connect 1 1 3 0;
#X connect 2 0 5 0;
#X connect 3 0 5 1;
#X connect 4 0 1 0;
#X connect 5 0 6 0;
#X coords 0 0 1 1 85 60 0;
#X restore -52 22 pd lpy_sample_catch;
