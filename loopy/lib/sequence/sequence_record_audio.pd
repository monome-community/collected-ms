#N canvas 21 8 1218 899 10;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$1-sequence-A-R 198891 float 2;
#X coords 0 1 198891 -1 100 70 1;
#X restore -248 -70 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$1-sequence-A-L 198891 float 2;
#X coords 0 1 198891 -1 100 70 1;
#X restore -348 -70 graph;
#X obj -88 -102 r \$1-record-time;
#X msg -88 6 resize \$1;
#X obj -88 -21 * 44.1;
#X text -22 15 x 44.1 (samples/ms);
#X text -22 5 = record time (ms);
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$1-sequence-B-R 198891 float 2;
#X coords 0 1 198891 -1 100 70 1;
#X restore -248 30 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$1-sequence-B-L 198891 float 2;
#X coords 0 1 198891 -1 100 70 1;
#X restore -348 30 graph;
#X obj -58 33 send \$1-sequence-A-R;
#X obj -68 53 send \$1-sequence-A-L;
#X obj -78 80 send \$1-sequence-B-R;
#X obj -88 100 send \$1-sequence-B-L;
#X obj 179 214 tabwrite~ \$1-sequence-B-L;
#X obj 160 184 tabwrite~ \$1-sequence-A-L;
#X obj 340 184 tabwrite~ \$1-sequence-A-R;
#X obj 360 214 tabwrite~ \$1-sequence-B-R;
#X text -58 -76 add 10 ms to record time for cross fade;
#X obj 575 -48 delay;
#X obj -88 -75 + 10;
#X msg 287 -75 1;
#X obj 216 4 + 1;
#X obj 248 31 sel 1;
#X obj 248 -21 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 248 4 float 2;
#X obj 287 -102 r \$1-listen-audio;
#X text 404 -104 1) start listening;
#X text 612 -48 3) after waiting for recording to finish;
#X obj 585 58 spigot;
#X obj 618 33 tgl 15 0 empty \$1-seq-all-toggle empty 17 7 0 10 -262144
-1 -1 0 1;
#X obj 595 85 delay 200;
#X obj 585 112 s all-off;
#X obj 248 110 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 575 -102 r \$1-record-audio;
#X obj 602 -75 r \$1-record-time;
#X obj -264 463 tgl 15 0 \$1-seq-row-toggle empty empty 17 7 0 10 -262144
-1 -1 0 1;
#X obj -279 535 *~;
#X obj -163 535 *~;
#X obj -331 593 tgl 15 0 \$1-seq-all-toggle empty empty 17 7 0 10 -262144
-1 -1 0 1;
#X obj -346 665 *~;
#X obj -230 665 *~;
#X obj -346 638 receive~ seq-all-L;
#X obj -230 638 receive~ seq-all-R;
#X obj -196 353 tgl 15 0 \$1-seq-ext-mode empty empty 17 7 0 10 -262144
-1 -1 0 1;
#X obj -211 405 *~;
#X obj -75 405 *~;
#X obj -331 273 r \$1-sequence-mode;
#X obj 161 147 catch~ \$1-seq-L;
#X obj 341 147 catch~ \$1-seq-R;
#X obj -211 432 throw~ \$1-seq-L;
#X obj -75 432 throw~ \$1-seq-R;
#X obj -279 562 throw~ \$1-seq-L;
#X obj -163 562 throw~ \$1-seq-R;
#X obj -346 692 throw~ \$1-seq-L;
#X obj -230 692 throw~ \$1-seq-R;
#X obj -279 508 receive~ \$1-row-L;
#X obj -163 508 receive~ \$1-row-R;
#X obj 575 168 spigot;
#X obj 608 143 tgl 15 0 empty \$1-seq-row-toggle empty 17 7 0 10 -262144
-1 -1 0 1;
#X obj 585 195 delay 200;
#X obj 575 222 s \$1-row-stop;
#X obj 585 -21 s \$1-recording-done-audio;
#X obj -88 -48 + 500;
#X text -53 -48 add headroom for latency correction;
#X obj 248 83 delay;
#X msg 63 405 0;
#X obj 92 405 f;
#X obj 63 351 sel 0 1;
#X obj 248 58 bng 15 250 50 0 \$1-record-audio empty empty 17 7 0 10
-262144 -1 -1;
#X obj 538 0 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X text 271 100 2) start recording after start listening;
#X text 271 110 + first quantized button press;
#X text 271 120 + delay for external latency \, if needed;
#X obj 102 378 r latency;
#X obj 63 432 s \$1-seq-latency;
#X obj 275 56 r \$1-seq-latency;
#X obj 575 6 delay 10;
#X text -332 255 ROUTE AUDIO BASED UPON AUDIO INPUT SELECTION;
#X obj -47 471 r step-row-quantize;
#X obj -32 562 f \$1;
#X obj -47 589 ==;
#X obj -47 616 sel 1;
#X obj -47 535 t f b;
#X text 744 -10 sequence_ctl.pd;
#X text 744 -20 4) send 'done' to;
#X obj -47 508 spigot;
#X obj -108 638 spigot;
#X obj -47 675 s \$1-seq-record-trigger;
#X obj 248 -48 r \$1-seq-record-trigger;
#X text 61 335 SET LATENCY ADJUST BASED UPON AUDIO INPUT SELECTION
;
#X text 633 32 all rows (mode 1);
#X text 623 142 this row only (mode 2);
#X text -22 -5 set array size (samples);
#X text 647 112 5a) turn off all samples;
#X text 660 222 5b) turn off this row only;
#X text -48 689 BANG RECORD TRIGGER BASED;
#X text -48 699 UPON AUDIO INPUT SELECTION;
#X obj -211 378 receive~ \$1-seq-ext-L;
#X obj -75 378 receive~ \$1-seq-ext-R;
#X obj -331 300 expr if ($f1==2 \, 1 \, 0) \; if ($f1==3 \, 1 \, 0)
\; if ($f1==4 \, 1 \, 0);
#X text -176 353 external audio (mode 4);
#X text -243 463 this row only (mode 3);
#X text -310 593 all rows (mode 2);
#X text -184 295 sequence record mode;
#X text -184 305 (0=button \, 1=button row n \, 2=audio all rows;
#X text -178 315 3=audio row n \, 4=audio external only);
#X connect 2 0 19 0;
#X connect 3 0 9 0;
#X connect 3 0 10 0;
#X connect 3 0 11 0;
#X connect 3 0 12 0;
#X connect 4 0 3 0;
#X connect 18 0 61 0;
#X connect 18 0 69 0;
#X connect 18 0 76 0;
#X connect 19 0 62 0;
#X connect 20 0 24 1;
#X connect 21 0 24 1;
#X connect 22 0 68 0;
#X connect 23 0 24 0;
#X connect 24 0 21 0;
#X connect 24 0 22 0;
#X connect 25 0 20 0;
#X connect 28 0 30 0;
#X connect 28 0 31 0;
#X connect 29 0 28 1;
#X connect 30 0 31 0;
#X connect 32 0 14 0;
#X connect 32 0 13 0;
#X connect 32 0 15 0;
#X connect 32 0 16 0;
#X connect 33 0 18 0;
#X connect 34 0 18 1;
#X connect 35 0 37 1;
#X connect 35 0 36 1;
#X connect 35 0 85 1;
#X connect 36 0 51 0;
#X connect 37 0 52 0;
#X connect 38 0 40 1;
#X connect 38 0 39 1;
#X connect 38 0 86 1;
#X connect 39 0 53 0;
#X connect 40 0 54 0;
#X connect 41 0 39 0;
#X connect 42 0 40 0;
#X connect 43 0 45 1;
#X connect 43 0 44 1;
#X connect 44 0 49 0;
#X connect 45 0 50 0;
#X connect 46 0 99 0;
#X connect 47 0 13 0;
#X connect 47 0 14 0;
#X connect 48 0 15 0;
#X connect 48 0 16 0;
#X connect 55 0 36 0;
#X connect 56 0 37 0;
#X connect 57 0 59 0;
#X connect 57 0 60 0;
#X connect 58 0 57 1;
#X connect 59 0 60 0;
#X connect 62 0 4 0;
#X connect 64 0 32 0;
#X connect 65 0 74 0;
#X connect 66 0 74 0;
#X connect 67 0 65 0;
#X connect 67 1 66 0;
#X connect 68 0 64 0;
#X connect 73 0 66 0;
#X connect 75 0 64 1;
#X connect 76 0 28 0;
#X connect 76 0 57 0;
#X connect 78 0 86 0;
#X connect 78 0 85 0;
#X connect 79 0 80 1;
#X connect 80 0 81 0;
#X connect 81 0 87 0;
#X connect 82 0 80 0;
#X connect 82 1 79 0;
#X connect 85 0 82 0;
#X connect 86 0 87 0;
#X connect 88 0 23 0;
#X connect 97 0 44 0;
#X connect 98 0 45 0;
#X connect 99 0 38 0;
#X connect 99 1 35 0;
#X connect 99 2 43 0;
#X connect 99 2 67 0;
