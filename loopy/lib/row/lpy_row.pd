#N canvas 570 542 710 412 10;
#N canvas 608 177 394 361 lpy_row_clear 0;
#X obj -279 -146 r \$1-row-clear;
#X obj -209 37 s 0-\$1-smp-clear;
#X obj -219 57 s 1-\$1-smp-clear;
#X obj -229 77 s 2-\$1-smp-clear;
#X obj -239 97 s 3-\$1-smp-clear;
#X obj -249 117 s 4-\$1-smp-clear;
#X obj -259 137 s 5-\$1-smp-clear;
#X obj -269 157 s 6-\$1-smp-clear;
#X obj -279 177 s 7-\$1-smp-clear;
#X obj -179 -90 s \$1-row-filename-display;
#X msg -179 -110 label ---;
#X obj -187 -70 s \$1-row-momentary;
#X obj -207 10 s \$1-row-multi;
#X connect 0 0 1 0;
#X connect 0 0 2 0;
#X connect 0 0 3 0;
#X connect 0 0 4 0;
#X connect 0 0 5 0;
#X connect 0 0 6 0;
#X connect 0 0 7 0;
#X connect 0 0 8 0;
#X connect 0 0 10 0;
#X connect 0 0 11 0;
#X connect 0 0 12 0;
#X connect 10 0 9 0;
#X restore 36 65 pd lpy_row_clear;
#N canvas 1403 89 506 573 lpy_row_quantize 0;
#X obj -110 -91 r quantize-main;
#X msg -110 105 off;
#X msg -95 85 1/32;
#X msg -65 105 1/8;
#X msg -50 85 1/4;
#X obj -110 132 prepend label;
#X msg -80 65 1/16;
#X obj -110 45 sel 0 1 2 3 4;
#X obj 179 350 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 87 145 0;
#X msg 147 182 1;
#X obj 179 267 r bpm-bang;
#X msg 147 65 1;
#X msg 132 85 2;
#X msg 117 105 4;
#X msg 102 125 8;
#X obj 206 182 r mpb;
#X obj 206 209 f;
#X obj 179 321 metro;
#X obj 87 45 sel 0 1 2 3 4;
#X obj 206 236 /;
#X floatatom 238 237 5 0 0 0 - - -;
#X text 272 230 millisec's per;
#X text 272 240 quantize beat;
#X obj 194 155 t b f;
#X obj 179 294 spigot;
#X text 228 -98 ui master;
#X text 227 -88 quantize adjustment;
#X text 244 262 forces quantize beat;
#X text 244 272 to sync with main beat;
#X obj 87 -16 f;
#X obj 123 -16 + 1;
#X obj 107 -38 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 127 -39 click on ui;
#X obj 87 11 mod 5;
#X msg -93 393 color 8 8 12;
#X msg -74 339 color 28 28 0;
#X obj 87 216 tgl 15 0 \$1-row-quantize-toggle empty empty 17 7 0 10
-262144 -1 -1 1 1;
#X obj -93 282 sel 0 1;
#X obj 107 -64 r \$1-row-quantize-s;
#X obj 200 45 s \$1-row-quantize;
#X obj -110 447 s \$1-row-quantize-r;
#X obj 87 368 s \$1-row-quantize-on;
#X obj 199 348 s \$1-row-quantize-bang;
#X obj 87 -91 r \$1-row-quantize-load;
#X obj -83 420 s \$1-row-quantize-label-r;
#X msg -83 366 color 0 12;
#X msg -64 309 color 2 0;
#X connect 0 0 30 0;
#X connect 1 0 5 0;
#X connect 2 0 5 0;
#X connect 3 0 5 0;
#X connect 4 0 5 0;
#X connect 5 0 41 0;
#X connect 6 0 5 0;
#X connect 7 0 1 0;
#X connect 7 1 2 0;
#X connect 7 2 6 0;
#X connect 7 3 3 0;
#X connect 7 4 4 0;
#X connect 9 0 18 0;
#X connect 9 0 37 0;
#X connect 10 0 37 0;
#X connect 11 0 25 0;
#X connect 12 0 24 0;
#X connect 13 0 24 0;
#X connect 14 0 24 0;
#X connect 15 0 24 0;
#X connect 16 0 17 0;
#X connect 17 0 20 0;
#X connect 18 0 8 0;
#X connect 18 0 43 0;
#X connect 19 0 9 0;
#X connect 19 1 15 0;
#X connect 19 2 14 0;
#X connect 19 3 13 0;
#X connect 19 4 12 0;
#X connect 20 0 21 0;
#X connect 20 0 18 1;
#X connect 24 0 17 0;
#X connect 24 0 10 0;
#X connect 24 1 20 1;
#X connect 25 0 18 0;
#X connect 30 0 34 0;
#X connect 31 0 30 1;
#X connect 32 0 30 0;
#X connect 34 0 31 0;
#X connect 34 0 7 0;
#X connect 34 0 19 0;
#X connect 34 0 40 0;
#X connect 35 0 41 0;
#X connect 36 0 41 0;
#X connect 37 0 25 1;
#X connect 37 0 38 0;
#X connect 37 0 42 0;
#X connect 38 0 35 0;
#X connect 38 0 46 0;
#X connect 38 1 36 0;
#X connect 38 1 47 0;
#X connect 39 0 32 0;
#X connect 44 0 30 0;
#X connect 46 0 45 0;
#X connect 47 0 45 0;
#X restore 36 102 pd lpy_row_quantize;
#N canvas 0 0 1205 909 lpy_row_sample 0;
#X obj -176 434 f \$1;
#X obj -203 461 pack f f;
#X msg -203 488 \; \$1-\$2-smp-data bang;
#X obj -204 232 !=;
#X obj -220 380 spigot 1;
#X obj -166 259 sel 0;
#X text -166 381 if not same as sample previously selected...;
#X obj -188 205 f -1;
#X text -183 232 if same as sample previously selected...;
#X obj 206 52 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj -175 77 spigot;
#X obj -142 52 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj -250 785 s \$1-smp-select-led;
#X text 304 104 ...stop/clear row;
#X obj 206 77 sel 1;
#X text 232 52 if row mode = multi...;
#X text -165 105 once sample selected for row:;
#X text 660 -104 receive change to quantize;
#X text 660 -94 for any sample in this row;
#X text 531 10 if sample # = currently selected...;
#X text 628 173 ...update quantize value for this row;
#X obj 519 -17 f -1;
#X obj 504 -71 unpack f f;
#X obj 504 -44 t f b;
#X obj 504 10 ==;
#X obj 504 91 spigot;
#X obj 514 145 pipe 10;
#X obj 504 64 f;
#X obj 504 37 t b f;
#X obj 514 118 r \$1-row-quantize;
#X text 620 118 or if change to row quantize...;
#X text 559 145 (wait for all samples to change);
#X obj 469 174 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 2
2;
#X obj 504 172 s \$1-sample-quantize;
#X obj 504 -98 r \$1-smp-quantize-change;
#X obj -250 731 f;
#X obj -250 610 r \$1-sample-length;
#X obj -250 637 != 0;
#X obj -250 758 spigot;
#X obj -250 664 t b f;
#X text -218 636 if sample found (length>0)...;
#X obj -172 131 s \$1-smp-select-send;
#X obj 540 -44 r \$1-smp-select-send;
#X obj -250 697 delay 5;
#X obj -235 104 t f f f b f;
#X text -84 347 ...stop row;
#X obj 206 158 s \$1-sample-length;
#X msg 206 131 0;
#X obj 216 104 s \$1-smp-clear;
#X obj -138 434 s \$1-smp-stop;
#X obj 71 -69 r \$1-row-mode;
#X text -132 77 ...pass sample select for row;
#X obj 519 315 f -1;
#X obj 504 261 unpack f f;
#X obj 504 288 t f b;
#X obj 504 342 ==;
#X obj 504 423 spigot;
#X obj 514 477 pipe 10;
#X obj 504 396 f;
#X obj 504 369 t b f;
#X obj 540 288 r \$1-smp-select-send;
#X obj 504 234 r \$1-smp-mode-change;
#X floatatom 467 505 5 0 0 0 - - -;
#X text 659 542 if no button off by sample end \, play;
#X text 715 553 at sample end \, play;
#X text 773 531 at sample end \, play;
#X text 501 531 0=momentary: button on=play \, button off=stop \;;
#X text 501 542 1=trigger: button on=play \;;
#X text 501 553 3=loop: button on=toggle play/stop \;;
#X obj 504 504 s \$1-smp-mode;
#X text 630 238 for any sample in this row;
#X text 531 342 if sample # = currently selected...;
#X text 560 477 (wait for all samples to change);
#X text 630 228 receive change to mode;
#X text 500 518 ...update current sample mode value for this row;
#X msg 128 739 0 1;
#X msg 171 465 0;
#X obj 201 405 r \$1-step-press;
#X msg 176 492 1;
#X obj 171 519 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 220 571 ...stop row;
#X text -80 490 ...fetch sample data;
#X obj 138 544 spigot;
#X obj 161 647 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 138 572 s \$1-row-stop;
#X obj 191 386 r \$1-row-stop;
#X obj 171 332 loadbang;
#X obj 128 697 spigot;
#X obj -166 348 s \$1-row-stop;
#X obj -235 -99 r \$1-smp-press;
#X obj -235 -72 unpack f f;
#X obj -235 -45 spigot;
#X obj -178 -45 == 0;
#X msg -178 -5 0 0;
#X text -150 -51 if sample press=off \,;
#X text -150 -41 send off to step press;
#X obj 514 450 r \$1-sample-mode;
#X text 620 450 or if change to row sample mode...;
#X obj 71 -42 expr if ($f1<=1 \, 1 \, 0) \; if ($f1==0 \, 1 \, 0) \;
if ($f1==1 \, 1 \, 0) \; if ($f1==2 \, 1 \, 0);
#X text -126 52 if row mode = cue or single...;
#X obj -166 316 spigot;
#X obj -133 291 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X text -119 292 if row mode = cue...;
#X obj 128 312 spigot;
#X obj 161 287 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 175 288 if row mode = single...;
#X obj -220 553 spigot;
#X obj -187 528 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X text -172 528 if row mode = single...;
#X text 188 519 ... and sample playing in this row;
#X text 222 765 ...play selected sample from step 0;
#X obj 141 620 == 0;
#X text 180 643 ...and sample stopped in this row;
#X obj -220 407 t b f b b;
#X obj 201 432 unpack f f;
#X obj 258 459 sel 1;
#X obj 161 672 pipe 0;
#X obj -178 -25 sel 1;
#X obj -178 15 s \$1-step-press;
#X obj 128 766 s \$1-step-press;
#X text -132 786 ...send sample # to lpy_row_led;
#X obj -167 158 r \$1-smp-clear;
#X msg -167 178 -1;
#X text 521 680 if sample # = currently selected...;
#X obj 509 653 f -1;
#X obj 494 626 t f b;
#X obj 494 680 ==;
#X obj 530 626 r \$1-smp-select-send;
#X obj 493 599 r \$1-sample-clear;
#X obj 494 707 sel 1;
#X obj 494 759 s \$1-smp-clear;
#X obj 494 734 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 445 636 5 0 0 0 - - -;
#X text -80 500 (from pd_lpy_sample_data);
#X obj 181 359 r all-off;
#X connect 0 0 1 1;
#X connect 1 0 2 0;
#X connect 3 0 4 1;
#X connect 3 0 5 0;
#X connect 4 0 113 0;
#X connect 5 0 100 0;
#X connect 5 0 103 0;
#X connect 7 0 3 1;
#X connect 9 0 14 0;
#X connect 10 0 90 0;
#X connect 11 0 10 1;
#X connect 14 0 47 0;
#X connect 14 0 48 0;
#X connect 21 0 24 1;
#X connect 22 0 23 0;
#X connect 22 1 27 1;
#X connect 23 0 24 0;
#X connect 23 1 21 0;
#X connect 24 0 28 0;
#X connect 25 0 32 0;
#X connect 25 0 33 0;
#X connect 26 0 32 0;
#X connect 26 0 33 0;
#X connect 27 0 25 0;
#X connect 28 0 27 0;
#X connect 28 1 25 1;
#X connect 29 0 26 0;
#X connect 34 0 22 0;
#X connect 35 0 38 0;
#X connect 36 0 37 0;
#X connect 37 0 39 0;
#X connect 38 0 12 0;
#X connect 39 0 43 0;
#X connect 39 1 38 1;
#X connect 42 0 21 1;
#X connect 43 0 35 0;
#X connect 44 0 35 1;
#X connect 44 1 4 0;
#X connect 44 2 7 1;
#X connect 44 2 3 0;
#X connect 44 3 7 0;
#X connect 44 4 41 0;
#X connect 47 0 46 0;
#X connect 50 0 98 0;
#X connect 52 0 55 1;
#X connect 53 0 54 0;
#X connect 53 1 58 1;
#X connect 54 0 55 0;
#X connect 54 1 52 0;
#X connect 55 0 59 0;
#X connect 56 0 62 0;
#X connect 56 0 69 0;
#X connect 57 0 69 0;
#X connect 57 0 62 0;
#X connect 58 0 56 0;
#X connect 59 0 58 0;
#X connect 59 1 56 1;
#X connect 60 0 52 1;
#X connect 61 0 53 0;
#X connect 75 0 119 0;
#X connect 76 0 79 0;
#X connect 77 0 114 0;
#X connect 78 0 79 0;
#X connect 79 0 82 1;
#X connect 79 0 111 0;
#X connect 82 0 84 0;
#X connect 83 0 116 0;
#X connect 85 0 76 0;
#X connect 86 0 76 0;
#X connect 87 0 75 0;
#X connect 89 0 10 0;
#X connect 90 0 91 0;
#X connect 90 1 91 1;
#X connect 90 1 92 0;
#X connect 91 0 44 0;
#X connect 92 0 117 0;
#X connect 93 0 118 0;
#X connect 96 0 57 0;
#X connect 98 0 11 0;
#X connect 98 1 101 0;
#X connect 98 2 104 0;
#X connect 98 2 107 0;
#X connect 98 3 9 0;
#X connect 100 0 88 0;
#X connect 101 0 100 1;
#X connect 103 0 82 0;
#X connect 103 0 87 0;
#X connect 104 0 103 1;
#X connect 106 0 75 0;
#X connect 107 0 106 1;
#X connect 111 0 83 0;
#X connect 113 0 106 0;
#X connect 113 1 1 0;
#X connect 113 2 0 0;
#X connect 113 3 49 0;
#X connect 114 1 115 0;
#X connect 115 0 78 0;
#X connect 116 0 87 1;
#X connect 117 0 93 0;
#X connect 121 0 122 0;
#X connect 122 0 7 1;
#X connect 124 0 126 1;
#X connect 125 0 126 0;
#X connect 125 1 124 0;
#X connect 126 0 129 0;
#X connect 127 0 124 1;
#X connect 128 0 125 0;
#X connect 128 0 132 0;
#X connect 129 0 131 0;
#X connect 131 0 130 0;
#X connect 134 0 76 0;
#X restore 37 139 pd lpy_row_sample;
#N canvas 53 59 1212 671 lpy_row_play 0;
#X obj -567 -323 r \$1-smp-select;
#X text -469 -323 sample #0-7 selected for this row;
#X obj -540 -136 f \$1;
#X obj -567 -163 t f b;
#X msg -567 198 set \$1-\$2-L-A;
#X msg -534 28 set \$1-\$2-L-B;
#X msg -557 158 set \$1-\$2-R-A;
#X msg -524 -12 set \$1-\$2-R-B;
#X obj -567 -109 pack f f;
#X obj -139 101 tabplay~ 0-\$1-L-A;
#X obj -23 101 tabplay~ 0-\$1-R-A;
#X obj 257 101 tabplay~ 0-\$1-R-B;
#X obj 141 101 tabplay~ 0-\$1-L-B;
#X obj -139 -5 r \$1-L-A;
#X obj -23 -5 r \$1-R-A;
#X obj 141 -5 r \$1-L-B;
#X obj 257 -5 r \$1-R-B;
#X obj -567 218 s \$1-L-A;
#X obj -557 178 s \$1-R-A;
#X obj -534 48 s \$1-L-B;
#X obj -524 8 s \$1-R-B;
#X obj 154 -167 / 8;
#X obj 139 -132 * 0;
#X obj -1 -78 s \$1-L-A;
#X obj 9 -105 s \$1-R-A;
#X obj -1 -132 * 0;
#X obj 154 -194 r \$1-sample-length;
#X obj 149 -105 s \$1-R-B;
#X obj 139 -78 s \$1-L-B;
#X obj -534 106 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 3;
#X obj -489 -64 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X obj -534 -39 spigot 0;
#X obj -567 131 spigot;
#X text -432 -14 set arrays for row player not playing;
#X text -472 158 set arrays for row player not playing;
#X obj -547 -217 f -1;
#X obj -547 -190 moses 0;
#X obj -534 79 r \$1-B-toggle;
#X obj -489 -91 r \$1-A-toggle;
#X obj -95 22 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 185 22 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj -547 -296 r \$1-A-step-press;
#X obj -537 -269 r \$1-B-step-press;
#X obj -547 -242 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text -566 -361 set tabplay arrays to chosen sample:;
#X text -566 -351 1) set immediately for stopped player;
#X text -566 -341 2) set after next step press for other player;
#X obj -1 -342 r \$1-A-step-press;
#X obj 26 -288 float \$1;
#X obj 43 -315 r microfade;
#X obj 26 -261 pack f f;
#X msg 26 -234 \; \$1-A-line 1 \$2;
#X obj -1 -315 t f b;
#X obj 166 -288 float \$1;
#X obj 183 -315 r microfade;
#X obj 166 -261 pack f f;
#X obj 139 -315 t f b;
#X obj 139 -342 r \$1-B-step-press;
#X msg 166 -234 \; \$1-B-line 1 \$2;
#X msg -139 -107 stop;
#X obj -139 -53 s \$1-L-A;
#X obj -129 -80 s \$1-R-A;
#X obj -139 -342 r \$1-A-stop;
#X obj -84 -255 r microfade;
#X obj -129 -228 f \$1;
#X obj -129 -201 pack f f;
#X msg -129 -174 \; \$1-A-line 0 \$2;
#X obj -139 -134 delay;
#X obj -139 -255 t b b;
#X msg 296 -107 stop;
#X obj 351 -255 r microfade;
#X obj 306 -228 f \$1;
#X obj 306 -201 pack f f;
#X obj 296 -134 delay;
#X obj 296 -255 t b b;
#X obj 296 -342 r \$1-B-stop;
#X msg 306 -174 \; \$1-B-line 0 \$2;
#X obj 306 -80 s \$1-R-B;
#X obj 296 -53 s \$1-L-B;
#X obj -138 192 *~;
#X obj -22 192 *~;
#X obj -123 155 line~;
#X obj -123 128 r \$1-A-line;
#X obj 142 192 *~;
#X obj 258 192 *~;
#X obj 157 155 line~;
#X obj 157 128 r \$1-B-line;
#X obj -62 47 r \$1-repeat-gate;
#X obj -95 74 spigot;
#X obj 218 47 r \$1-repeat-gate;
#X obj 185 74 spigot;
#X obj 366 164 == 0;
#X obj 333 186 spigot;
#X text 419 204 if repeat gate closed;
#X text 419 214 (happens in trigger mode);
#X text 419 224 send stop for row led's;
#X obj -109 -282 r \$1-smp-clear;
#X obj 326 -282 r \$1-smp-clear;
#X text 419 234 when play finishes;
#X obj -129 -322 r \$1-row-stop;
#X obj 306 -322 r \$1-row-stop;
#X obj 333 213 s \$1-row-stop;
#X obj -29 251 throw~ \$1-group-L;
#X obj 81 251 throw~ \$1-group-R;
#X obj -119 -302 r all-off;
#X obj 316 -302 r all-off;
#X connect 0 0 3 0;
#X connect 0 0 35 1;
#X connect 2 0 8 1;
#X connect 3 0 8 0;
#X connect 3 1 2 0;
#X connect 4 0 17 0;
#X connect 5 0 19 0;
#X connect 6 0 18 0;
#X connect 7 0 20 0;
#X connect 8 0 31 0;
#X connect 8 0 32 0;
#X connect 9 0 79 0;
#X connect 10 0 80 0;
#X connect 10 1 39 0;
#X connect 10 1 92 0;
#X connect 11 0 84 0;
#X connect 11 1 40 0;
#X connect 11 1 92 0;
#X connect 12 0 83 0;
#X connect 13 0 9 0;
#X connect 14 0 10 0;
#X connect 15 0 12 0;
#X connect 16 0 11 0;
#X connect 21 0 22 1;
#X connect 21 0 25 1;
#X connect 22 0 27 0;
#X connect 22 0 28 0;
#X connect 25 0 24 0;
#X connect 25 0 23 0;
#X connect 26 0 21 0;
#X connect 29 0 32 1;
#X connect 30 0 31 1;
#X connect 31 0 7 0;
#X connect 31 0 5 0;
#X connect 32 0 6 0;
#X connect 32 0 4 0;
#X connect 35 0 36 0;
#X connect 36 1 3 0;
#X connect 37 0 29 0;
#X connect 38 0 30 0;
#X connect 39 0 88 0;
#X connect 40 0 90 0;
#X connect 41 0 43 0;
#X connect 42 0 43 0;
#X connect 43 0 35 0;
#X connect 47 0 52 0;
#X connect 48 0 50 0;
#X connect 49 0 50 1;
#X connect 50 0 51 0;
#X connect 52 0 25 0;
#X connect 52 1 48 0;
#X connect 53 0 55 0;
#X connect 54 0 55 1;
#X connect 55 0 58 0;
#X connect 56 0 22 0;
#X connect 56 1 53 0;
#X connect 57 0 56 0;
#X connect 59 0 61 0;
#X connect 59 0 60 0;
#X connect 62 0 68 0;
#X connect 63 0 67 1;
#X connect 63 0 65 1;
#X connect 64 0 65 0;
#X connect 65 0 66 0;
#X connect 67 0 59 0;
#X connect 68 0 67 0;
#X connect 68 1 64 0;
#X connect 69 0 77 0;
#X connect 69 0 78 0;
#X connect 70 0 73 1;
#X connect 70 0 72 1;
#X connect 71 0 72 0;
#X connect 72 0 76 0;
#X connect 73 0 69 0;
#X connect 74 0 73 0;
#X connect 74 1 71 0;
#X connect 75 0 74 0;
#X connect 79 0 102 0;
#X connect 80 0 103 0;
#X connect 81 0 80 1;
#X connect 81 0 79 1;
#X connect 82 0 81 0;
#X connect 83 0 102 0;
#X connect 84 0 103 0;
#X connect 85 0 84 1;
#X connect 85 0 83 1;
#X connect 86 0 85 0;
#X connect 87 0 88 1;
#X connect 88 0 9 0;
#X connect 88 0 10 0;
#X connect 89 0 90 1;
#X connect 89 0 91 0;
#X connect 90 0 11 0;
#X connect 90 0 12 0;
#X connect 91 0 92 1;
#X connect 92 0 101 0;
#X connect 96 0 68 0;
#X connect 97 0 74 0;
#X connect 99 0 68 0;
#X connect 100 0 74 0;
#X connect 104 0 68 0;
#X connect 105 0 74 0;
#X restore 36 250 pd lpy_row_play;
#N canvas 2 0 1172 830 lpy_row_led 0;
#X msg 237 -34 stop;
#X obj 370 -60 / 8;
#X obj 292 33 metro;
#X obj 292 87 counter 7;
#X obj 292 -34 t b f;
#X obj 370 -32 / 44.1;
#X text 486 -86 length of selected sample;
#X text 415 -32 msec/slice= (sample length/8)/44.1;
#X obj 292 -182 r \$1-A-step-press;
#X obj 302 -155 r \$1-B-step-press;
#X text 327 32 metro beats each slice;
#X text 352 91 then counts up mod 7;
#X obj 224 265 pow;
#X obj 212 211 t b f;
#X msg 212 238 2;
#X obj 370 -87 r \$1-sample-length;
#X obj -53 493 f \$1;
#X obj -225 178 pow;
#X obj -237 124 t b f;
#X msg -237 151 2;
#X obj -53 516 pack f f f;
#X obj 198 456 t b f;
#X obj -53 466 t b f;
#X msg 217 40 -1;
#X msg 198 265 0;
#X obj 198 -61 t b b b;
#X text -288 78 current sample #0-7;
#X text 352 81 slice counter starts at step press #;
#X obj -237 97 r \$1-smp-select-led;
#X obj -225 432 f;
#X msg -140 -58 0;
#X obj -140 -182 r \$1-smp-clear;
#X obj -140 -105 t b b b;
#X obj 198 -182 r \$1-row-stop;
#X obj 292 141 moses 0;
#X text 235 457 step (right side) led message;
#X text -308 -180 clear for current sample...;
#X text -89 -102 ... clears step led;
#X text -117 -60 ... and sample led;
#N canvas 210 87 323 602 led-row-ui 0;
#X obj -33 -66 inlet;
#X obj -33 -12 sel 0 1 2 4 8 16 32 64 128;
#X obj -26 389 s 0-\$1-filename-display-r;
#X obj -9 342 s 1-\$1-filename-display-r;
#X obj 8 295 s 2-\$1-filename-display-r;
#X obj 25 248 s 3-\$1-filename-display-r;
#X obj 93 58 s 7-\$1-filename-display-r;
#X obj 76 105 s 6-\$1-filename-display-r;
#X obj 59 152 s 5-\$1-filename-display-r;
#X obj 42 199 s 4-\$1-filename-display-r;
#X obj -33 -39 t f b;
#X msg -33 15 color 0 0 12;
#X msg 103 38 color 28 28 0;
#X msg 86 85 color 28 28 0;
#X msg 69 132 color 28 28 0;
#X msg 52 179 color 28 28 0;
#X msg 35 228 color 28 28 0;
#X msg 18 275 color 28 28 0;
#X msg 1 322 color 28 28 0;
#X msg -16 369 color 28 28 0;
#X connect 0 0 10 0;
#X connect 1 0 11 0;
#X connect 1 1 19 0;
#X connect 1 2 18 0;
#X connect 1 3 17 0;
#X connect 1 4 16 0;
#X connect 1 5 15 0;
#X connect 1 6 14 0;
#X connect 1 7 13 0;
#X connect 1 8 12 0;
#X connect 10 0 1 0;
#X connect 10 1 11 0;
#X connect 11 0 2 0;
#X connect 11 0 3 0;
#X connect 11 0 4 0;
#X connect 11 0 5 0;
#X connect 11 0 6 0;
#X connect 11 0 7 0;
#X connect 11 0 8 0;
#X connect 11 0 9 0;
#X connect 12 0 6 0;
#X connect 13 0 7 0;
#X connect 14 0 8 0;
#X connect 15 0 9 0;
#X connect 16 0 5 0;
#X connect 17 0 4 0;
#X connect 18 0 3 0;
#X connect 19 0 2 0;
#X restore 35 516 pd led-row-ui;
#X obj 492 168 f \$1;
#X obj 292 168 t b f;
#X obj 292 195 f \$1;
#X obj 292 222 pack f f;
#X obj 292 114 t f b;
#X obj 208 -162 r all-off;
#X obj -26 124 r mpb;
#X obj -53 205 delay;
#X obj -53 -9 r bpm-bang;
#X obj -53 364 spigot;
#X msg -53 232 0;
#X msg -100 279 0;
#X msg -90 319 1;
#X msg 339 60 goto \$1;
#X text -247 467 sample (left side) led message;
#X obj -26 178 max 125;
#X obj -192 362 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj -153 364 spigot;
#X obj -53 124 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj -215 205 s \$1-blink-on;
#X obj -100 259 r \$1-blink-off;
#X obj -90 299 r \$1-blink-on;
#X obj -121 -78 s \$1-blink-off;
#X obj 186 -135 s \$1-blink-on;
#X obj 362 3 s \$1-blink-off;
#X obj -53 597 s led-row;
#X text 7 591 send row led message to;
#X text 7 601 lpy_transpose_led_row;
#X obj -20 72 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj -20 18 r \$1-row-mode;
#X text -2 70 if row mode = cue or single...;
#X obj -20 45 expr if ($f1<=1 \, 1 \, 0);
#X obj -53 97 spigot;
#X obj -120 -142 r clear-all-led;
#X obj -26 151 * 0.5;
#X obj -130 -162 r \$1-row-clear;
#X text -182 -160 row...;
#X text -236 -140 or all led's...;
#X obj -53 570 list;
#X obj -103 516 r page;
#X obj -103 544 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj -53 543 t b l;
#X msg 562 208 \; \$1-row-led-0-r color 10 10 12;
#X msg 552 248 \; \$1-row-led-1-r color 10 10 12;
#X msg 542 288 \; \$1-row-led-2-r color 10 10 12;
#X msg 532 328 \; \$1-row-led-3-r color 10 10 12;
#X msg 522 368 \; \$1-row-led-4-r color 10 10 12;
#X msg 512 408 \; \$1-row-led-5-r color 10 10 12;
#X msg 502 448 \; \$1-row-led-6-r color 10 10 12;
#X msg 492 488 \; \$1-row-led-7-r color 10 10 12;
#X obj 370 115 s \$1-row-current-slice;
#X obj 737 -182 r \$1-subloop-led;
#X obj 737 -128 f;
#X obj 737 -100 mod 8;
#X obj 795 -100 + 1;
#X obj 747 -73 sel;
#X obj 737 -155 unpack f f;
#X obj 749 8 pow;
#X obj 737 -46 t b f;
#X msg 737 -19 2;
#X obj 749 35 +;
#X obj 780 35 f;
#X msg 827 -100 0;
#X obj 734 63 f;
#X obj 660 -17 delay 1;
#X obj 222 182 spigot 1;
#X msg 670 10 0;
#X msg 660 64 1;
#X obj 660 37 delay 200;
#X obj 218 -108 r \$1-slice-led-off;
#X obj 634 95 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 650 89 stop normal led progress;
#X text 650 99 for 200 milliseconds;
#X text 678 -181 light all;
#X text 678 -171 led's in;
#X text 678 -161 sub-loop;
#X msg 292 249 \; \$1-row-led-\$2-r color 28 28 0;
#X connect 0 0 2 0;
#X connect 1 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 44 0;
#X connect 3 0 90 0;
#X connect 3 0 105 0;
#X connect 4 0 2 0;
#X connect 4 0 64 0;
#X connect 4 1 53 0;
#X connect 5 0 2 1;
#X connect 8 0 4 0;
#X connect 9 0 4 0;
#X connect 12 0 21 0;
#X connect 13 0 14 0;
#X connect 13 1 12 1;
#X connect 14 0 12 0;
#X connect 15 0 1 0;
#X connect 16 0 20 0;
#X connect 17 0 29 0;
#X connect 17 0 59 0;
#X connect 18 0 19 0;
#X connect 18 1 17 1;
#X connect 19 0 17 0;
#X connect 20 0 81 0;
#X connect 21 0 16 0;
#X connect 21 1 20 2;
#X connect 22 0 16 0;
#X connect 22 1 20 1;
#X connect 22 1 39 0;
#X connect 23 0 44 0;
#X connect 24 0 21 0;
#X connect 25 0 24 0;
#X connect 25 1 23 0;
#X connect 25 2 0 0;
#X connect 28 0 18 0;
#X connect 29 0 22 0;
#X connect 30 0 29 0;
#X connect 31 0 32 0;
#X connect 32 0 30 0;
#X connect 32 1 62 0;
#X connect 32 2 25 0;
#X connect 33 0 25 0;
#X connect 33 0 63 0;
#X connect 34 1 41 0;
#X connect 40 0 82 0;
#X connect 40 0 83 0;
#X connect 40 0 84 0;
#X connect 40 0 85 0;
#X connect 40 0 86 0;
#X connect 40 0 87 0;
#X connect 40 0 88 0;
#X connect 40 0 89 0;
#X connect 41 0 42 0;
#X connect 41 1 43 1;
#X connect 42 0 43 0;
#X connect 43 0 116 0;
#X connect 44 0 34 0;
#X connect 44 1 40 0;
#X connect 45 0 25 0;
#X connect 45 0 63 0;
#X connect 46 0 74 0;
#X connect 47 0 50 0;
#X connect 48 0 72 0;
#X connect 49 0 22 0;
#X connect 50 0 49 0;
#X connect 51 0 49 1;
#X connect 51 0 57 1;
#X connect 52 0 49 1;
#X connect 52 0 57 1;
#X connect 53 0 3 0;
#X connect 55 0 47 1;
#X connect 56 0 29 0;
#X connect 57 0 29 0;
#X connect 58 0 47 0;
#X connect 58 0 57 0;
#X connect 60 0 51 0;
#X connect 60 0 56 0;
#X connect 61 0 52 0;
#X connect 68 0 72 1;
#X connect 69 0 71 0;
#X connect 71 0 68 0;
#X connect 72 0 58 0;
#X connect 73 0 32 0;
#X connect 74 0 55 0;
#X connect 75 0 32 0;
#X connect 78 0 65 0;
#X connect 79 0 80 0;
#X connect 80 0 78 0;
#X connect 81 0 78 0;
#X connect 81 1 78 1;
#X connect 91 0 96 0;
#X connect 92 0 93 0;
#X connect 93 0 95 0;
#X connect 93 0 98 0;
#X connect 94 0 92 0;
#X connect 95 0 104 0;
#X connect 95 1 94 0;
#X connect 96 0 92 0;
#X connect 96 1 95 1;
#X connect 96 1 102 0;
#X connect 97 0 100 0;
#X connect 98 0 99 0;
#X connect 98 1 97 1;
#X connect 99 0 97 0;
#X connect 100 0 101 0;
#X connect 100 0 103 1;
#X connect 101 0 100 1;
#X connect 102 0 100 1;
#X connect 103 0 21 0;
#X connect 104 0 103 0;
#X connect 104 0 106 0;
#X connect 104 0 108 0;
#X connect 105 0 13 0;
#X connect 106 0 110 0;
#X connect 107 0 110 0;
#X connect 108 0 107 0;
#X connect 109 0 25 0;
#X connect 110 0 105 1;
#X restore 35 287 pd lpy_row_led;
#N canvas 1343 88 467 347 lpy_row_save 0;
#X obj 15 18 r \$1-row-save;
#X obj 261 306 textfile;
#X obj 20 131 savepanel;
#X obj 30 177 list trim;
#X msg 30 158 write \$1;
#X obj 20 214 splitfilename;
#X text 2 238 save file name;
#X text 2 248 to ui display;
#X obj 20 59 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 20 84 t b b b b b;
#X msg 385 158 clear;
#X obj 261 178 prepend add;
#X obj 261 158 lpy_save_row \$1;
#X obj 95 241 s \$1-row-filename;
#X text 2 258 (via lpy_row_load);
#X connect 0 0 8 0;
#X connect 2 0 4 0;
#X connect 2 0 5 0;
#X connect 3 0 1 0;
#X connect 4 0 3 0;
#X connect 5 1 13 0;
#X connect 8 0 9 0;
#X connect 9 0 2 0;
#X connect 9 1 12 0;
#X connect 9 2 10 0;
#X connect 10 0 1 0;
#X connect 11 0 1 0;
#X connect 12 0 11 0;
#X restore 36 -9 pd lpy_row_save;
#N canvas 1742 14 690 799 lpy_row_load 0;
#X obj -556 165 textfile;
#X obj -556 -135 openpanel;
#X msg -516 129 rewind;
#X msg -467 130 clear;
#X obj -556 129 until;
#X msg -556 47 read \$1;
#X obj -556 74 t b b a b;
#X obj -491 47 splitfilename;
#X obj -518 101 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg -556 101 500;
#X text -287 -66 clear samples \, clear leds;
#X obj -556 -160 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj -574 391 pack f f;
#X obj -547 411 pack f f;
#X obj -520 431 pack f f;
#X msg -574 538 \; \$1-row-mode-r \$2;
#X msg -520 458 \; \$1-sample-mode-r \$2;
#X obj -556 302 unpack f f f f;
#X obj -362 302 unpack f f f f s;
#X obj -373 391 pack f f f;
#X obj -350 411 pack f f f;
#X obj -326 431 pack f f s;
#X msg -326 458 \; \$1-\$2-filename \$3;
#X msg -373 538 \; \$1-\$2-smp-quantize-toggle-r \$3;
#X msg -350 498 \; \$1-\$2-smp-mode-r \$3;
#X text -463 -188 load sample set file for row - click on ui;
#X obj -556 -187 r \$1-row-load;
#X obj -376 -70 s \$1-row-stop;
#X text -287 -76 on row load;
#X obj -484 -70 s \$1-row-clear;
#X obj -556 -108 t s b b;
#X obj -556 192 route row smp;
#X obj -556 354 f \$1;
#X obj -556 329 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj -339 354 f \$1;
#X obj -339 329 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg -547 498 \; \$1-row-quantize-load \$2;
#X msg -416 245 label \$1;
#X obj -416 218 text_scroll;
#X obj -416 191 list;
#X obj -376 158 bng 15 250 50 0 empty scroll-bang empty 17 7 0 10 -262144
-1 -1;
#X obj -416 270 s \$1-row-filename-display;
#X obj -376 131 r \$1-row-scroll;
#X text -260 271 load/scroll file name for ui display;
#X msg -377 101 20;
#X obj -416 74 t b a b;
#X obj -396 47 r \$1-row-filename;
#X text -288 41 receive save file name for display;
#X text -288 51 (from lpy_row_save);
#X connect 0 0 31 0;
#X connect 0 1 4 1;
#X connect 1 0 30 0;
#X connect 2 0 0 0;
#X connect 3 0 0 0;
#X connect 4 0 0 0;
#X connect 5 0 6 0;
#X connect 6 0 9 0;
#X connect 6 1 2 0;
#X connect 6 2 0 0;
#X connect 6 3 3 0;
#X connect 7 1 45 0;
#X connect 8 0 0 0;
#X connect 9 0 4 0;
#X connect 11 0 1 0;
#X connect 12 0 15 0;
#X connect 13 0 36 0;
#X connect 14 0 16 0;
#X connect 17 0 33 0;
#X connect 17 1 12 1;
#X connect 17 2 13 1;
#X connect 17 3 14 1;
#X connect 18 0 21 0;
#X connect 18 0 20 0;
#X connect 18 0 19 0;
#X connect 18 1 35 0;
#X connect 18 2 19 2;
#X connect 18 3 20 2;
#X connect 18 4 21 2;
#X connect 19 0 23 0;
#X connect 20 0 24 0;
#X connect 21 0 22 0;
#X connect 26 0 11 0;
#X connect 30 0 7 0;
#X connect 30 0 5 0;
#X connect 30 1 29 0;
#X connect 30 2 27 0;
#X connect 31 0 17 0;
#X connect 31 1 18 0;
#X connect 32 0 12 0;
#X connect 32 0 13 0;
#X connect 32 0 14 0;
#X connect 33 0 32 0;
#X connect 34 0 21 1;
#X connect 34 0 20 1;
#X connect 34 0 19 1;
#X connect 35 0 34 0;
#X connect 37 0 41 0;
#X connect 38 0 37 0;
#X connect 39 0 38 0;
#X connect 40 0 39 0;
#X connect 42 0 40 0;
#X connect 44 0 38 1;
#X connect 45 0 39 0;
#X connect 45 1 39 1;
#X connect 45 2 44 0;
#X connect 46 0 45 0;
#X restore 36 28 pd lpy_row_load;
#N canvas 721 81 719 707 lpy_row_step_press 0;
#X obj -184 -282 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 352800;
#X obj -229 -336 r \$1-step-press;
#X text -167 -289 if no sample selected for row \,;
#X text -167 -279 block step press messages;
#X obj -229 -257 spigot 0;
#X obj -229 -148 spigot;
#X obj 113 262 unpack f f;
#X obj 113 289 spigot;
#X text 154 289 only pass 'on' thru;
#X obj -171 -176 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X text -155 -182 if 'cue' or 'single' row mode \,;
#X text -155 -172 allow step press messages thru;
#X obj 113 -309 unpack f f;
#X obj 113 -88 spigot;
#X text 160 -87 button on \, pass step press thru;
#X obj 113 1 unpack f f;
#X obj 113 109 spigot;
#X text -129 34 open sample repeat gate;
#X text -129 24 loop mode;
#X msg 170 55 0;
#X obj 170 82 s \$1-repeat-gate;
#X text 208 28 button off;
#X obj 160 171 s \$1-repeat-gate;
#X msg 160 142 1;
#X obj -177 111 s \$1-repeat-gate;
#X msg -177 84 1;
#X text -148 91 open sample repeat gate;
#X text -148 77 momentary mode;
#X obj -158 57 s \$1-repeat-gate;
#X msg -158 30 1;
#X obj 113 198 s \$1-step-row;
#X obj 113 -61 s \$1-step-row;
#X obj 113 316 s \$1-step-row;
#X text 244 -336 current sample in MOMENTARY mode;
#X text 231 -26 current sample in TRIGGER mode;
#X text 214 235 current sample in LOOP mode;
#X obj 170 -162 sel 0;
#X obj 170 28 sel 0;
#X obj -223 246 s \$1-step-momentary;
#X obj -202 219 s \$1-step-trigger;
#X obj -181 192 s \$1-step-loop;
#X obj 113 235 r \$1-step-loop;
#X obj 113 -26 r \$1-step-trigger;
#X obj 113 -336 r \$1-step-momentary;
#X obj -184 -309 r \$1-sample-length;
#X obj -171 -230 r \$1-row-mode;
#X obj -171 -203 expr if ($f1<=1 \, 1 \, 0);
#X obj -177 -24 r \$1-smp-mode;
#X obj -223 165 route 0 1 2;
#X obj -223 138 list;
#X obj -229 20 f;
#X obj -229 -24 t b l;
#X obj -177 3 sel 0 2;
#X floatatom -94 6 5 0 0 0 - - -;
#X obj 170 -122 s \$1-row-stop;
#X msg 338 -187 -1;
#X obj 276 -174 moses 0;
#X obj 203 -235 spigot;
#X obj 236 -262 == 0;
#X obj 330 -282 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
2 2;
#X obj 297 -255 spigot;
#X obj 276 -201 f -1;
#X obj 330 -309 r \$1-sample-quantize;
#X obj 276 -228 r \$1-row-quantize-bang;
#X obj 170 -142 delay 1;
#X text 159 104 button on \, pass step;
#X text 159 113 press thru and...;
#X text 196 49 close sample;
#X text 196 59 repeat gate;
#X text 184 138 ...open sample;
#X text 202 148 repeat gate;
#X text 220 -148 button off \, stop players;
#X text 220 -138 on next quantize beat;
#X obj -162 -101 sel 0;
#X obj -162 -81 delay 1;
#X text -112 -87 button off \, send bang;
#X text -149 154 direct step press message;
#X text -149 164 based upon play mode for;
#X text -149 174 current sample in this row;
#X obj -219 -121 unpack f f;
#X obj -162 -61 s \$1-button-off;
#X text 198 -60 send to lpy_row_step_send;
#X text 198 199 send to lpy_row_step_send;
#X text 198 317 send to lpy_row_step_send;
#X text -112 -77 to subloop \, note repeat;
#X connect 0 0 4 1;
#X connect 1 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 51 0;
#X connect 5 0 79 0;
#X connect 6 0 7 0;
#X connect 6 1 7 1;
#X connect 7 0 32 0;
#X connect 9 0 5 1;
#X connect 12 0 13 0;
#X connect 12 1 13 1;
#X connect 12 1 57 0;
#X connect 12 1 60 0;
#X connect 12 1 36 0;
#X connect 13 0 31 0;
#X connect 15 0 16 0;
#X connect 15 1 16 1;
#X connect 15 1 37 0;
#X connect 16 0 23 0;
#X connect 16 0 30 0;
#X connect 19 0 20 0;
#X connect 23 0 22 0;
#X connect 25 0 24 0;
#X connect 29 0 28 0;
#X connect 36 0 64 0;
#X connect 37 0 19 0;
#X connect 41 0 6 0;
#X connect 42 0 15 0;
#X connect 43 0 12 0;
#X connect 44 0 0 0;
#X connect 45 0 46 0;
#X connect 46 0 9 0;
#X connect 47 0 50 1;
#X connect 47 0 52 0;
#X connect 47 0 53 0;
#X connect 48 0 38 0;
#X connect 48 1 39 0;
#X connect 48 2 40 0;
#X connect 49 0 48 0;
#X connect 50 0 49 0;
#X connect 51 0 50 0;
#X connect 51 1 49 1;
#X connect 52 0 25 0;
#X connect 52 1 29 0;
#X connect 55 0 61 1;
#X connect 56 1 55 0;
#X connect 56 1 36 0;
#X connect 57 0 36 0;
#X connect 58 0 57 1;
#X connect 59 0 60 1;
#X connect 59 0 58 0;
#X connect 60 0 61 1;
#X connect 61 0 56 0;
#X connect 62 0 59 0;
#X connect 63 0 61 0;
#X connect 64 0 54 0;
#X connect 73 0 74 0;
#X connect 74 0 80 0;
#X connect 79 1 73 0;
#X restore 36 176 pd lpy_row_step_press;
#N canvas 0 0 1280 965 lpy_row_step_send 1;
#X obj 331 -23 tgl 15 0 \$1-B-toggle empty empty 17 7 0 10 -262144
-1 -1 0 3;
#X obj 163 42 spigot;
#X obj 298 42 spigot;
#X obj 180 74 s \$1-A-step-press;
#X obj 163 101 s \$1-B-stop;
#X obj 315 74 s \$1-B-step-press;
#X obj 298 102 s \$1-A-stop;
#X obj 213 43 tgl 15 0 \$1-A-toggle empty empty 17 7 0 10 -262144 -1
-1 0 1;
#X text 161 148 playing \, and a press/fade-in to the other.;
#X text 161 118 A vs. B used to micro crossfade when;
#X text 161 128 sample is cut. Each press sends a;
#X text 160 138 fade-out/stop to sample currently;
#X msg 292 -191 -1;
#X obj 236 -191 moses 0;
#X obj 163 -275 spigot;
#X obj 196 -302 == 0;
#X obj 290 -342 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
2 2;
#X obj 257 -275 spigot;
#X obj 236 -211 f -1;
#X obj 196 11 == 0;
#X obj 290 -369 r \$1-sample-quantize;
#X obj 236 -248 r \$1-row-quantize-bang;
#X obj 298 -55 s step-row-quantize;
#X obj 298 -82 f \$1;
#X text 439 -216 note repeat;
#X msg 377 -164 -1;
#X obj 356 -117 moses 0;
#X obj 356 -137 f -1;
#X obj 163 -70 t f b;
#X obj 163 -43 pipe;
#X obj 249 -27 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 172 -191 press thru;
#X text 172 -181 once;
#X text 446 -167 if note repeat is on;
#X text 446 -157 keep sending same step;
#X text 446 -147 press thru on quantize;
#X text 446 -137 beat until button off;
#X text 172 -201 send step;
#X text 173 -211 always;
#X obj -705 176 r \$1-sample-length;
#X obj -705 203 / 352.8;
#X text -616 209 sample length/(44.1 samples/ms * 8 steps);
#X obj -802 444 f;
#X floatatom -655 204 5 0 0 0 - - -;
#X text -616 199 length (sec) of 1 step =;
#X obj 462 -191 r \$1-button-off;
#X obj -787 -70 spigot;
#X obj -787 -396 r \$1-step-row;
#X obj -787 -222 i;
#X floatatom -728 -221 5 0 0 0 - - -;
#X text -525 -221 current press;
#X obj -754 -222 i;
#X obj -739 -268 i -1;
#X floatatom -559 -221 5 0 0 0 - - -;
#X obj 163 -396 r \$1-step-send;
#X obj -792 471 s \$1-step-send;
#X obj -409 38 pack f f;
#X obj -409 152 s \$1-subloop-led;
#X obj -732 122 spigot;
#X obj -732 149 sel;
#X obj -732 257 delay;
#X obj -732 95 r \$1-row-current-slice;
#X obj -717 38 i;
#X msg -565 65 1;
#X obj -787 -315 t b b f b;
#X text -706 -142 button on (>=0) then;
#X text -700 -394 process step press for subloop if needed;
#X obj -777 -369 r \$1-button-off;
#X msg -777 -342 -1;
#X obj -732 284 s \$1-slice-led-off;
#X text -709 143 if current slice =;
#X text -709 153 last step in sub-loop...;
#X text -616 285 ...stop led progress;
#X text -704 471 ...send 1st press step for sub-loop;
#X text -698 257 ...wait for last step to finish;
#X obj 346 -210 r repeat-A-bang;
#X obj 356 -190 r repeat-B-bang;
#X obj -747 311 r \$1-smp-mode;
#X obj -691 449 s \$1-row-stop;
#X obj -762 338 i;
#X obj -762 365 route 0 1 2;
#X obj -658 368 r \$1-repeat-gate;
#X obj -658 395 == 0;
#X obj -691 422 spigot;
#X obj -708 395 == 1;
#X obj -741 422 spigot;
#X obj -762 424 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text -666 313 ...if mode=momentary or loop \, start sub-loop again
;
#X text -559 368 ...if mode=trigger \, only start sub-loop again;
#X text 252 -401 quantize & repeat step if needed;
#X text 252 -391 toggle between players A & B for crossfade;
#X text -559 378 if repeat gate is open (buttons still held);
#X msg -117 -94 1;
#X msg -107 -121 0;
#X obj -140 -66 spigot;
#X obj -140 -39 sel -1;
#X obj -138 94 i;
#X obj -138 -15 t b b;
#X obj -409 125 spigot;
#X obj -705 230 - 5;
#X obj -107 -148 delay 200;
#X obj -410 11 pipe 210;
#X obj -744 -108 s \$1-process-subloop;
#X obj -117 -175 r \$1-process-subloop;
#X obj -717 11 r \$1-process-subloop;
#X obj -162 67 moses 0;
#X obj -111 12 s \$1-stop-subloop;
#X obj -533 11 r \$1-stop-subloop;
#X msg -533 65 0;
#X obj -523 38 r \$1-row-stop;
#X obj -138 39 delay;
#X text -305 156 led's in sub-loop;
#X text -305 146 briefly light all;
#X obj -138 121 s \$1-step-send;
#X text -51 121 ...send step through;
#X obj -754 -175 expr if ($f1>=0 && $f2>=0 \, 1 \, 0) \; if ($f1==-1
&& $f2>=0 \, $f2 \, -1);
#X obj -559 -135 moses 0;
#X obj -510 -108 s \$1-step-send;
#X text -423 -108 ...send step through;
#X text -416 -91 ...stop subloop \, if playing;
#X obj -520 -88 s \$1-stop-subloop;
#X text -511 -131 button on (>=0)...;
#X text -511 -141 button off (-1) followed by;
#X text -87 -68 if button off (-1) comes w/i 200 ms;
#X text -87 -58 after 2 button ons \, don't sub-loop;
#X text -87 -48 & play from last button on press;
#X obj -744 -135 sel 1;
#X text -706 -132 button on (>=0)...;
#X text -726 -92 ...process sub-loop;
#X text -695 -221 previous press;
#X text -744 -71 previous press \, sent after;
#X text -744 -61 subloop on;
#X obj -802 525 s \$1-button-off;
#X obj -802 498 delay 5;
#X obj 123 304 s fresh-start-r;
#X msg 123 277 0;
#X obj 113 356 s bpm-reset;
#X obj 146 225 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 146 198 r fresh-start;
#X obj 113 250 spigot;
#X text 224 311 if step-press is first since;
#X text 224 321 start-up or stop all \, sync;
#X text 224 331 master clock with this press;
#X obj 113 331 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X connect 0 0 2 1;
#X connect 0 0 19 0;
#X connect 1 0 3 0;
#X connect 1 0 4 0;
#X connect 2 0 5 0;
#X connect 2 0 6 0;
#X connect 12 0 18 1;
#X connect 13 1 12 0;
#X connect 13 1 28 0;
#X connect 14 0 28 0;
#X connect 15 0 14 1;
#X connect 16 0 17 1;
#X connect 16 0 15 0;
#X connect 17 0 18 1;
#X connect 17 0 27 1;
#X connect 18 0 13 0;
#X connect 19 0 1 1;
#X connect 19 0 7 0;
#X connect 20 0 16 0;
#X connect 21 0 18 0;
#X connect 23 0 22 0;
#X connect 25 0 27 1;
#X connect 26 1 28 0;
#X connect 27 0 26 0;
#X connect 28 0 29 0;
#X connect 28 1 23 0;
#X connect 28 1 0 0;
#X connect 28 1 30 0;
#X connect 29 0 1 0;
#X connect 29 0 2 0;
#X connect 29 0 139 0;
#X connect 39 0 40 0;
#X connect 40 0 43 0;
#X connect 40 0 99 0;
#X connect 42 0 55 0;
#X connect 42 0 133 0;
#X connect 45 0 25 0;
#X connect 46 0 42 1;
#X connect 46 0 101 0;
#X connect 47 0 64 0;
#X connect 48 0 46 0;
#X connect 51 0 49 0;
#X connect 51 0 115 0;
#X connect 51 0 105 0;
#X connect 52 0 48 1;
#X connect 52 0 51 1;
#X connect 53 0 56 1;
#X connect 53 0 62 1;
#X connect 53 0 94 0;
#X connect 53 0 115 1;
#X connect 54 0 14 0;
#X connect 54 0 17 0;
#X connect 56 0 98 0;
#X connect 58 0 59 0;
#X connect 59 0 60 0;
#X connect 60 0 69 0;
#X connect 60 0 79 0;
#X connect 61 0 58 0;
#X connect 62 0 59 1;
#X connect 63 0 58 1;
#X connect 63 0 98 1;
#X connect 64 0 48 0;
#X connect 64 1 51 0;
#X connect 64 2 52 1;
#X connect 64 2 53 0;
#X connect 64 3 52 0;
#X connect 67 0 68 0;
#X connect 68 0 64 0;
#X connect 75 0 27 0;
#X connect 76 0 27 0;
#X connect 77 0 79 1;
#X connect 79 0 80 0;
#X connect 80 0 86 0;
#X connect 80 1 83 0;
#X connect 80 1 85 0;
#X connect 80 2 86 0;
#X connect 81 0 82 0;
#X connect 81 0 84 0;
#X connect 82 0 83 1;
#X connect 83 0 78 0;
#X connect 84 0 85 1;
#X connect 85 0 86 0;
#X connect 86 0 42 0;
#X connect 92 0 94 1;
#X connect 93 0 94 1;
#X connect 94 0 95 0;
#X connect 95 0 97 0;
#X connect 96 0 113 0;
#X connect 97 0 110 0;
#X connect 97 1 106 0;
#X connect 98 0 57 0;
#X connect 99 0 60 1;
#X connect 100 0 93 0;
#X connect 101 0 56 0;
#X connect 103 0 100 0;
#X connect 103 0 92 0;
#X connect 104 0 62 0;
#X connect 104 0 63 0;
#X connect 105 1 96 1;
#X connect 107 0 108 0;
#X connect 108 0 58 1;
#X connect 108 0 98 1;
#X connect 109 0 108 0;
#X connect 110 0 96 0;
#X connect 115 0 46 1;
#X connect 115 0 126 0;
#X connect 115 1 116 0;
#X connect 116 1 117 0;
#X connect 116 1 120 0;
#X connect 126 0 102 0;
#X connect 133 0 132 0;
#X connect 135 0 134 0;
#X connect 137 0 139 1;
#X connect 138 0 137 0;
#X connect 139 0 135 0;
#X connect 139 0 143 0;
#X connect 143 0 136 0;
#X restore 36 213 pd lpy_row_step_send;
